#include <iostream>
#include <cmath>
#include <fstream>



int calculateMinorDeterminant(int **minor){
    int result = minor[0][0]*minor[1][1] - minor[0][1]*minor[1][0];
    return result;
}

int calculateDeterminant(int** matrix, int size) {
    int determinant = 0;

    for (int i = 0; i < size; i++) {
        int** minor = new int*[size-1];
        for(int r = 0; r < size-1; r++)minor[r] = new int[size-1];
        int sign = (i % 2 == 0) ? 1 : -1;

        for (int j = 1; j < size; j++) {
            int col = 0;
            for (int k = 0; k < size; k++) {
                if (k != i) {
                    minor[j - 1][col] = matrix[j][k];
                    col++;
                }
            }
        }

        if(size > 3){
            int o = calculateDeterminant(minor, size-1);
            determinant += o;
        }else{

            int minorDeterminant = calculateMinorDeterminant(minor);
            determinant += sign * matrix[0][i] * minorDeterminant;
        }
    }
    std::cout << determinant << std::endl;

    return determinant;
}

double* kramer(int** matrix, int* unknown, int size){
    int** temp = new int*[size];
    double* iks = new double[size];
    int A = calculateDeterminant(matrix, size);
    for(int i = 0; i < size; i++){
        for(int j = 0; j < size; j++){
            temp[j] = new int[size];
            for(int k = 0; k < size; k++)temp[j][k] = matrix[j][k];
        }
        for(int o = 0; o < size; o++)temp[o][i] = unknown[o];
        iks[i] = ((double)calculateDeterminant(temp, size))/((double)A);
    } 
    return iks;
}

int main() {
    /*int matrix[3][3] = {
        {3, 1, 2},
        {-1, 2, -3},
        {-2, 1, 1}
    };*/

    /*int unknown[3][1] = {
        {4},
        {1},
        {-2}
    };*/

    std::ifstream filein;
    filein.open("./text.txt");
    int size;
    filein >> size;
    int** matrix = new int*[size];
    for(int i = 0; i < size; i ++){
        matrix[i] = new int[size];
    }
    int* vector = new int[size];
    for(int i = 0; i < size; i++){
        for(int j = 0; j <= size; j++){
            if(j == size){
                filein >> vector[i] ;
            }else filein >> matrix[i][j];
        }
    }


    double* x = kramer(matrix, vector, size);
    for(int i = 0; i < size; i++)std::cout << "X" << i << " = " << x[i] << std::endl; 

    return 0;
}